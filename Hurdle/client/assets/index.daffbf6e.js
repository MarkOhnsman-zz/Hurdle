import{r as R,c as y,a as v,o as p,b as _,d as a,e as d,F as I,f as L,g as $,h as q,i as B,S as k,j as H,w as b,t as V,p as U,k as M,l as E,m as j}from"./vendor.fa40ae07.js";const K=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};K();const g=R({user:{},account:{}});var x=(o,e)=>{for(const[t,n]of e)o[t]=n;return o};const Y={name:"App",setup(){return{appState:y(()=>g)}}},W=a("footer",null,[a("div",{class:"bg-dark text-light text-center p-4"}," Made with \u{1F496} by CodeWorks ")],-1);function z(o,e,t,n,r,s){const c=v("Navbar"),u=v("router-view");return p(),_(I,null,[a("header",null,[d(c)]),a("main",null,[d(u)]),W],64)}var F=x(Y,[["render",z]]);const T=window.location.origin.includes("localhost"),C=T?"http://localhost:3000":"",G="mark-codeworks.us.auth0.com",Q="https://MarkDev.com",J="Qx0sMBfDbr9hZ916wAVJ6Y4ywBMBV9R2",Z="modulepreload",S={},X="/",w=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${X}${n}`,n in S)return;S[n]=!0;const r=n.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":Z,r||(c.as="script",c.crossOrigin=""),c.href=n,document.head.appendChild(c),r)return new Promise((u,D)=>{c.addEventListener("load",u),c.addEventListener("error",D)})})).then(()=>e())};function ee(o){switch(o){case"./pages/AboutPage.vue":return w(()=>import("./AboutPage.b83ba49a.js"),["assets/AboutPage.b83ba49a.js","assets/vendor.fa40ae07.js"]);case"./pages/AccountPage.vue":return w(()=>import("./AccountPage.eed74708.js"),["assets/AccountPage.eed74708.js","assets/AccountPage.1d38451d.css","assets/vendor.fa40ae07.js"]);case"./pages/HomePage.vue":return w(()=>import("./HomePage.2931eb9a.js"),["assets/HomePage.2931eb9a.js","assets/HomePage.f2e6c7fa.css","assets/vendor.fa40ae07.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function A(o){return()=>ee(`./pages/${o}.vue`)}const te=[{path:"/",name:"Home",component:A("HomePage")},{path:"/about",name:"About",component:A("AboutPage")},{path:"/account",name:"Account",component:A("AccountPage"),beforeEnter:q}],P=L({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:$(),routes:te});function h(o,e){if(T)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const l={log(){h("log",arguments)},error(){h("error",arguments)},warn(){h("warn",arguments)},assert(){h("assert",arguments)},trace(){h("trace",arguments)}},m=B.create({baseURL:C,timeout:8e3});class oe{async getAccount(){try{const e=await m.get("/account");g.account=e.data}catch(e){l.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const ne=new oe;class re{static async confirm(e="Are you sure?",t="You won't be able to revert this!",n="warning",r="Yes, delete it!"){try{return!!(await k.fire({title:e,text:t,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",n="top-end",r=3e3,s=!0){k.fire({title:e,icon:t,position:n,timer:r,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const se={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class ae{constructor(e=!1,t=C){}on(e,t){var n;return(n=this.socket)==null||n.on(e,t.bind(this)),this}onConnected(e){l.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){l.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(se.authenticate,e)}onError(e){l.error("[SOCKET_ERROR]",e)}enqueue(e,t){l.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){l.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class ce extends ae{constructor(){super();this.on("error",this.onError)}onError(e){re.toast(e.message,"error")}}const O=new ce,i=H({domain:G,clientId:J,audience:Q,useRefreshTokens:!0,onRedirectCallback:o=>{P.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});i.on(i.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=i.bearer,m.interceptors.request.use(ie),g.user=i.user,await ne.getAccount(),O.authenticate(i.bearer)});async function ie(o){if(!i.isAuthenticated)return o;const e=i.identity.exp*1e3,t=e<Date.now(),n=e<Date.now()+1e3*60*60*12;return t?await i.loginWithPopup():n&&(await i.getTokenSilently(),m.defaults.headers.authorization=i.bearer,O.authenticate(i.bearer)),o}var ue="/assets/cw-logo.71baeadb.png";const le={setup(){return{user:y(()=>g.user),async login(){i.loginWithPopup()},async logout(){i.logout({returnTo:window.location.origin})}}}},f=o=>(U("data-v-e64c9206"),o=o(),M(),o),de={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},he=f(()=>a("div",{class:"d-flex flex-column align-items-center"},[a("img",{alt:"logo",src:ue,height:"45"})],-1)),pe=f(()=>a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1)),_e={class:"collapse navbar-collapse",id:"navbarText"},ge={class:"navbar-nav me-auto"},me=E(" About "),fe={class:"navbar-text"},ve={key:1,class:"dropdown my-2 my-lg-0"},be={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},we=["src"],Ae={class:"mx-3 text-success lighten-30"},ye={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},ke=f(()=>a("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),Ee=f(()=>a("i",{class:"mdi mdi-logout"},null,-1)),xe=E(" logout "),Te=[Ee,xe];function Ce(o,e,t,n,r,s){const c=v("router-link");return p(),_("nav",de,[d(c,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:b(()=>[he]),_:1}),pe,a("div",_e,[a("ul",ge,[a("li",null,[d(c,{to:{name:"About"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:b(()=>[me]),_:1})])]),a("span",fe,[n.user.isAuthenticated?(p(),_("div",ve,[a("div",be,[a("img",{src:n.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,we),a("span",Ae,V(n.user.name),1)]),a("div",ye,[d(c,{to:{name:"Account"}},{default:b(()=>[ke]),_:1}),a("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...u)=>n.logout&&n.logout(...u))},Te)])])):(p(),_("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...u)=>n.login&&n.login(...u))}," Login "))])])])}var Se=x(le,[["render",Ce],["__scopeId","data-v-e64c9206"]]),Pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Se});function Oe(o){Object.entries({"./components/Navbar.vue":Pe}).forEach(([t,n])=>{const r=n.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(r,n.default)})}const N=j(F);Oe(N);N.use(P).mount("#app");export{g as A,x as _};
